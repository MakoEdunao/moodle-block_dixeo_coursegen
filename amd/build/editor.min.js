/**
 * Course structure JSON editor
 *
 * @module     block_dixeo_coursegen/editor
 * @package
 * @author     Josemaria Bolanos <admin@mako.digital>
 * @copyright  2026 Dixeo (contact@dixeo.com)
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_dixeo_coursegen/editor",["jquery","core/ajax","core/notification","core/str","core/templates"],(function($,Ajax,Notification,Str,Templates){var MODULE_TYPE_OPTIONS=[{value:"Page",label:"Page",icon:"fa-file-alt"},{value:"Text and Media area",label:"Text and Media area",icon:"fa-book"},{value:"Glossary",label:"Glossary",icon:"fa-list-alt"},{value:"Slideshow",label:"Slideshow",icon:"fa-images"},{value:"URL",label:"URL",icon:"fa-link"},{value:"Simple Quiz",label:"Simple Quiz",icon:"fa-question-circle"},{value:"Quiz",label:"Quiz",icon:"fa-check-square"},{value:"H5P Quiz",label:"H5P Quiz",icon:"fa-puzzle-piece"},{value:"Flash Cards",label:"Flash Cards",icon:"fa-id-card"},{value:"Crosswords",label:"Crosswords",icon:"fa-th-large"},{value:"Find the words",label:"Find the words",icon:"fa-search"}];return{jobid:null,version:"",structure:null,historyIndex:-1,historyTotal:0,versions:[],autoSaveInterval:null,countdownInterval:null,countdown:60,currentlyEditing:null,hasUnsavedChanges:!1,autoSaveEnabled:!1,pendingCollapseState:null,init:function(jobid){this.jobid=jobid,this.showLoading(),this.loadVersions(),this.startAutoSave(),this.setupEventHandlers()},showLoading:function(){var container=$(".course-structure-container");Str.get_string("editor_loading","block_dixeo_coursegen").done((function(str){container.html('<div id="loading-indicator" class="text-center py-5"><i class="fa fa-spinner fa-spin fa-3x"></i><p class="mt-3">'+str+"</p></div>")}))},loadStructure:function(index){var self=this,loadIndex=void 0!==index?index:-1;Ajax.call([{methodname:"block_dixeo_coursegen_get_structure",args:{jobid:this.jobid,index:loadIndex},done:function(response){self.structure=JSON.parse(response.structure),self.version=response.version,self.historyIndex=response.index,self.historyTotal=response.total,self.renderStructure(),self.updateUndoRedoButtons()},fail:function(error){Notification.exception(error)}}])},loadVersions:function(){var self=this;Ajax.call([{methodname:"block_dixeo_coursegen_get_versions",args:{jobid:this.jobid},done:function(versions){self.versions=versions,self.historyTotal=versions.length,self.loadStructure()},fail:function(error){Notification.exception(error)}}])},saveStructure:function(){var self=this;this.hasUnsavedChanges&&(this.showSavingIndicator(),Ajax.call([{methodname:"block_dixeo_coursegen_save_structure",args:{jobid:this.jobid,structure:JSON.stringify(this.structure),current_index:this.historyIndex},done:function(response){self.version=response.version,self.historyIndex=response.index,self.historyTotal=response.total,self.loadVersions(),self.showSavedIndicator(),self.clearModified(),self.updateUndoRedoButtons()},fail:function(error){Notification.exception(error)}}]))},renderStructure:function(){var self=this,container=$(".course-structure-container");if(container.empty(),this.structure&&this.structure.title){var templateContext={title:this.structure.title||"",summary:this.structure.summary||null,image:this.structure.image||null,jobid:this.jobid,hasSections:this.structure.sections&&this.structure.sections.length>0,sections:[]};this.structure.sections&&this.structure.sections.length>0&&this.structure.sections.forEach((function(section,sectionIdx){var sectionData={index:sectionIdx,number:sectionIdx+1,title:section.title||"",summary:section.summary||null,jobid:self.jobid,hasModules:section.modules&&section.modules.length>0,modules:[]};section.modules&&section.modules.length>0&&section.modules.forEach((function(module,moduleIdx){var iconClass=self.getModuleIcon(module.type),moduleType=module.type||"";sectionData.modules.push({index:moduleIdx,sectionIndex:sectionIdx,type:moduleType,typeUpper:moduleType.toUpperCase(),title:module.title||"",hints:module.hints||null,icon:iconClass,jobid:self.jobid,moduleTypeOptions:MODULE_TYPE_OPTIONS})})),templateContext.sections.push(sectionData)})),templateContext.hasSections=templateContext.sections.length>0,Str.get_strings([{key:"editor_edit",component:"block_dixeo_coursegen"},{key:"editor_duplicate",component:"block_dixeo_coursegen"},{key:"editor_delete",component:"block_dixeo_coursegen"},{key:"editor_add_section",component:"block_dixeo_coursegen"},{key:"editor_add_activity",component:"block_dixeo_coursegen"},{key:"editor_change_activity_type",component:"block_dixeo_coursegen"}]).then((function(strings){return templateContext.strings={edit:strings[0],duplicate:strings[1],delete:strings[2],add_section:strings[3],add_activity:strings[4],change_activity_type:strings[5]},Templates.render("block_dixeo_coursegen/course_structure",templateContext)})).then((function(html){container.html(html),self.setupEventHandlersAfterRender()})).catch((function(error){Notification.exception(error),Str.get_string("editor_invalid_data","block_dixeo_coursegen").done((function(str){container.html('<div class="alert alert-danger">'+str+"</div>")}))}))}else{self=this;Str.get_string("editor_invalid_data","block_dixeo_coursegen").done((function(str){container.html('<div class="alert alert-danger">'+str+"</div>")}))}},setupEventHandlersAfterRender:function(){this.setupCollapseHandlers(),this.setupEditableHandlers(),this.setupActionHandlers(),this.setupModuleTypeSelectHandlers(),this.setupDragAndDrop(),this.pendingCollapseState&&(this.restoreCollapseState(this.pendingCollapseState),this.pendingCollapseState=null)},getModuleIcon:function(type){if(!type)return"fa-file-alt";var i,t=type.toLowerCase();for(i=0;i<MODULE_TYPE_OPTIONS.length;i++)if(MODULE_TYPE_OPTIONS[i].value.toLowerCase()===t)return MODULE_TYPE_OPTIONS[i].icon;return"fa-file-alt"},escapeHtml:function(text){if(!text)return"";var div=document.createElement("div");return div.textContent=text,div.innerHTML},decodeHtml:function(text){if(!text)return"";var textarea=document.createElement("textarea");return textarea.innerHTML=text,textarea.value},captureCollapseState:function(){var self=this,expandedSections={};return $(".section-item").each((function(){var sectionIdx=$(this).data("section-idx"),collapseTarget=$("#section-"+self.jobid+"-"+sectionIdx);expandedSections[sectionIdx]=collapseTarget.hasClass("show")})),expandedSections},adjustExpandedIndices:function(expandedSections,fromIndex,toIndex){if(fromIndex===toIndex)return expandedSections;var adjusted={};return Object.keys(expandedSections).forEach((function(idxStr){var idx=parseInt(idxStr),wasExpanded=expandedSections[idx];idx===fromIndex?wasExpanded&&(adjusted[toIndex]=!0):fromIndex<toIndex?idx>fromIndex&&idx<=toIndex?adjusted[idx-1]=wasExpanded:adjusted[idx]=wasExpanded:idx>=toIndex&&idx<fromIndex?adjusted[idx+1]=wasExpanded:adjusted[idx]=wasExpanded})),adjusted},restoreCollapseState:function(expandedSections){var self=this;Object.keys(expandedSections).forEach((function(sectionIdx){if(expandedSections[sectionIdx]){var collapseTarget=$("#section-"+self.jobid+"-"+sectionIdx),toggleButton=$('[data-target="#section-'+self.jobid+"-"+sectionIdx+'"]'),icon=toggleButton.find("i");collapseTarget.addClass("show"),icon.removeClass("fa-chevron-right").addClass("fa-chevron-down"),toggleButton.attr("aria-expanded","true").removeClass("collapsed")}}))},setupCollapseHandlers:function(){$('[data-toggle="collapse"]').off("click").on("click",(function(e){e.preventDefault(),e.stopPropagation();var target=$($(this).data("target")),icon=$(this).find("i");target.hasClass("show")?(target.removeClass("show"),icon.removeClass("fa-chevron-down").addClass("fa-chevron-right"),$(this).attr("aria-expanded","false").addClass("collapsed")):(target.addClass("show"),icon.removeClass("fa-chevron-right").addClass("fa-chevron-down"),$(this).attr("aria-expanded","true").removeClass("collapsed"))}))},setupEditableHandlers:function(){var self=this;$(".editable").off("click").on("click",(function(){self.currentlyEditing||self.startEditing($(this))}))},startEditing:function($element){var self=this;this.currentlyEditing=$element;var originalText=$element.text(),path=$element.data("path");$element.addClass("editing"),$element.attr("contenteditable","true"),$element.focus();var range=document.createRange();range.selectNodeContents($element[0]);var sel=window.getSelection();sel.removeAllRanges(),sel.addRange(range);var $controls=$element.next(".edit-controls");$controls.html($("#edit-controls-template").html()),$controls.show(),$controls.find(".save-edit").off("click").on("click",(function(){var newText=$element.text().trim();self.saveEdit($element,path,newText)})),$controls.find(".cancel-edit").off("click").on("click",(function(){$element.text(originalText),self.cancelEdit($element)})),$element.hasClass("module-hints")||$element.hasClass("course-summary")||$element.off("keydown").on("keydown",(function(e){"Enter"===e.key?(e.preventDefault(),$controls.find(".save-edit").click()):"Escape"===e.key&&($element.text(originalText),self.cancelEdit($element))}))},saveEdit:function($element,path,value){var decodedValue=this.decodeHtml(value);this.setValueByPath(this.structure,path,decodedValue),this.markAsModified(),this.cancelEdit($element),$element.text(decodedValue)},cancelEdit:function($element){$element.removeClass("editing"),$element.removeAttr("contenteditable"),$element.next(".edit-controls").hide().empty(),this.currentlyEditing=null},setValueByPath:function(obj,path,value){for(var parts=path.match(/([^\[\]\.]+)|(\[\d+\])/g),current=obj,i=0;i<parts.length-1;i++){current=current[parts[i].replace(/[\[\]]/g,"")]}current[parts[parts.length-1].replace(/[\[\]]/g,"")]=value},setupActionHandlers:function(){var self=this;$(".btn-edit-item").off("click").on("click",(function(e){e.stopPropagation(),$(this).closest(".section-item, .module-item").find(".section-title, .module-title").first().click()})),$(".btn-copy-item").off("click").on("click",(function(e){e.stopPropagation(),self.duplicateItem($(this))})),$(".btn-delete-item").off("click").on("click",(function(e){e.stopPropagation(),self.deleteItem($(this))})),$(".btn-add-section").off("click").on("click",(function(e){e.stopPropagation();var sectionIndex=parseInt($(this).data("section-index"));self.addSection(sectionIndex)})),$(".btn-add-module").off("click").on("click",(function(e){e.stopPropagation();var sectionIndex=parseInt($(this).data("section-index")),moduleIndex=parseInt($(this).data("module-index"));self.addModule(sectionIndex,moduleIndex)}))},setupModuleTypeSelectHandlers:function(){var self=this;function closeAllDropdowns(){$(".module-type-select-dropdown").addClass("d-none").attr("aria-hidden","true"),$(".module-type-select-toggle").attr("aria-expanded","false")}function openDropdown($wrapper){var $dropdown=$wrapper.find(".module-type-select-dropdown"),$toggle=$wrapper.find(".module-type-select-toggle"),isOpen=!$dropdown.hasClass("d-none");closeAllDropdowns(),isOpen||($dropdown.removeClass("d-none").attr("aria-hidden","false"),$toggle.attr("aria-expanded","true"))}$(document).off("click",".module-type-select-toggle").on("click",".module-type-select-toggle",(function(e){e.stopPropagation(),e.preventDefault(),openDropdown($(this).closest(".module-type-select-wrapper"))})),$(document).off("click",".module-type").on("click",".module-type",(function(e){e.stopPropagation();var $wrapper=$(this).closest(".module-item").find(".module-type-select-wrapper");$wrapper.length&&openDropdown($wrapper)})),$(document).off("click",".module-type-option").on("click",".module-type-option",(function(e){e.stopPropagation();var i,value=$(this).data("value"),$wrapper=$(this).closest(".module-type-select-wrapper"),sectionIdx=parseInt($wrapper.data("section-index"),10),moduleIdx=parseInt($wrapper.data("module-index"),10),opt=null;for(i=0;i<MODULE_TYPE_OPTIONS.length;i++)if(MODULE_TYPE_OPTIONS[i].value===value){opt=MODULE_TYPE_OPTIONS[i];break}if(opt){self.structure.sections[sectionIdx].modules[moduleIdx].type=value,$wrapper.find(".module-type-select-toggle i").not(".module-type-select-chevron").removeClass().addClass("fa "+opt.icon+" fa-2x");var $moduleType=$wrapper.closest(".module-item").find(".module-type");$moduleType.length&&$moduleType.text(value.toUpperCase()),closeAllDropdowns(),self.markAsModified()}})),$(document).off("click.module-type-select").on("click.module-type-select",(function(e){$(e.target).closest(".module-type-select-wrapper").length||closeAllDropdowns()})),$(document).off("mouseenter mouseleave",".module-type-select-toggle").on("mouseenter mouseleave",".module-type-select-toggle",(function(e){var $moduleType=$(this).closest(".module-item").find(".module-type");"mouseenter"===e.type?($(this).addClass("highlighted"),$moduleType.addClass("highlighted")):$moduleType.is(":hover")||($(this).removeClass("highlighted"),$moduleType.removeClass("highlighted"))})),$(document).off("mouseenter mouseleave",".module-type").on("mouseenter mouseleave",".module-type",(function(e){var $toggle=$(this).closest(".module-item").find(".module-type-select-toggle");"mouseenter"===e.type?($toggle.addClass("highlighted"),$(this).addClass("highlighted")):$toggle.is(":hover")||($toggle.removeClass("highlighted"),$(this).removeClass("highlighted"))}))},addSection:function(index){var self=this,expandedSections=this.captureCollapseState();Str.get_strings([{key:"editor_new_section_title",component:"block_dixeo_coursegen"},{key:"editor_new_section_summary",component:"block_dixeo_coursegen"}]).done((function(strings){var newSection={title:strings[0],summary:strings[1],modules:[]};self.structure.sections.splice(index,0,newSection),self.markAsModified(),self.pendingCollapseState=expandedSections,self.renderStructure()}))},addModule:function(sectionIndex,moduleIndex){var self=this,expandedSections=this.captureCollapseState();this.structure.sections[sectionIndex].modules||(this.structure.sections[sectionIndex].modules=[]),Str.get_strings([{key:"editor_new_module_type",component:"block_dixeo_coursegen"},{key:"editor_new_module_title",component:"block_dixeo_coursegen"},{key:"editor_new_module_hints",component:"block_dixeo_coursegen"}]).done((function(strings){var newModule={type:strings[0],title:strings[1],hints:strings[2]};self.structure.sections[sectionIndex].modules.splice(moduleIndex,0,newModule),self.markAsModified(),expandedSections[sectionIndex]=!0,self.pendingCollapseState=expandedSections,self.renderStructure()}))},duplicateItem:function($button){var expandedSections=this.captureCollapseState(),$sectionItem=$button.closest(".section-item"),$moduleItem=$button.closest(".module-item"),self=this;Str.get_string("editor_copy_suffix","block_dixeo_coursegen").done((function(copySuffix){if($moduleItem.length>0){var sectionIdx=$sectionItem.data("section-idx"),moduleIdx=$moduleItem.data("module-idx"),module=JSON.parse(JSON.stringify(self.structure.sections[sectionIdx].modules[moduleIdx]));module.title=module.title+copySuffix,self.structure.sections[sectionIdx].modules.splice(moduleIdx+1,0,module)}else if($sectionItem.length>0){sectionIdx=$sectionItem.data("section-idx");var section=JSON.parse(JSON.stringify(self.structure.sections[sectionIdx]));section.title=section.title+copySuffix,self.structure.sections.splice(sectionIdx+1,0,section)}self.markAsModified(),self.pendingCollapseState=expandedSections,self.renderStructure()}))},deleteItem:function($button){var self=this,$sectionItem=$button.closest(".section-item"),$moduleItem=$button.closest(".module-item"),messageKey=$moduleItem.length>0?"editor_delete_module_confirm":"editor_delete_section_confirm";Str.get_strings([{key:"editor_confirm_delete",component:"block_dixeo_coursegen"},{key:messageKey,component:"block_dixeo_coursegen"},{key:"delete",component:"core"},{key:"cancel",component:"core"}]).done((function(strings){Notification.confirm(strings[0],strings[1],strings[2],strings[3],(function(){var expandedSections=self.captureCollapseState();if($moduleItem.length>0){var sectionIdx=$sectionItem.data("section-idx"),moduleIdx=$moduleItem.data("module-idx");self.structure.sections[sectionIdx].modules.splice(moduleIdx,1)}else if($sectionItem.length>0){sectionIdx=$sectionItem.data("section-idx");self.structure.sections.splice(sectionIdx,1)}self.markAsModified(),self.pendingCollapseState=expandedSections,self.renderStructure()}))}))},markAsModified:function(){this.hasUnsavedChanges=!0,this.autoSaveEnabled||(this.autoSaveEnabled=!0,this.countdown=60,$("#countdown-timer").text(this.countdown).removeClass("badge-secondary").addClass("badge-primary").show(),$("#autosave-label").show())},startAutoSave:function(){var self=this;$("#countdown-timer").hide(),$("#autosave-label").hide(),this.countdownInterval=setInterval((function(){self.autoSaveEnabled&&self.hasUnsavedChanges&&(self.countdown--,$("#countdown-timer").text(self.countdown),self.countdown<=0&&self.saveStructure())}),1e3),$("#btn-save-now").on("click",(function(){self.hasUnsavedChanges&&self.saveStructure()})),$("#btn-undo").on("click",(function(){self.undo()})),$("#btn-redo").on("click",(function(){self.redo()})),$("#btn-reload").on("click",(function(){Str.get_string("editor_reload_confirm","block_dixeo_coursegen").done((function(confirmMsg){confirm(confirmMsg)&&(self.hasUnsavedChanges=!1,self.autoSaveEnabled=!1,self.countdown=60,$("#countdown-timer").hide(),$("#autosave-label").hide(),self.loadStructure(-1))}))}))},clearModified:function(){this.hasUnsavedChanges=!1,this.autoSaveEnabled=!1,this.countdown=60,$("#countdown-timer").hide(),$("#autosave-label").hide()},setupDragAndDrop:function(){var self=this;$(".section-item").attr("draggable","true"),$(".section-item").on("dragstart",(function(e){e.originalEvent.dataTransfer.effectAllowed="move",e.originalEvent.dataTransfer.setData("type","section"),e.originalEvent.dataTransfer.setData("index",$(this).data("section-idx")),$(this).addClass("dragging")})),$(".section-item").on("dragend",(function(){$(this).removeClass("dragging"),$(".drag-over").removeClass("drag-over")})),$(".section-item").on("dragover",(function(e){e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="move",$(this).addClass("drag-over")})),$(".section-item").on("dragleave",(function(){$(this).removeClass("drag-over")})),$(".section-item").on("drop",(function(e){e.preventDefault();var type=e.originalEvent.dataTransfer.getData("type"),fromIndex=parseInt(e.originalEvent.dataTransfer.getData("index")),toIndex=$(this).data("section-idx");if("section"===type&&fromIndex!==toIndex){var expandedSections=self.captureCollapseState(),section=self.structure.sections.splice(fromIndex,1)[0];self.structure.sections.splice(toIndex,0,section),self.markAsModified();var adjustedExpanded=self.adjustExpandedIndices(expandedSections,fromIndex,toIndex);self.pendingCollapseState=adjustedExpanded,self.renderStructure()}})),$(".module-item").attr("draggable","true"),$(".module-item").on("dragstart",(function(e){e.stopPropagation(),e.originalEvent.dataTransfer.effectAllowed="move",e.originalEvent.dataTransfer.setData("type","module"),e.originalEvent.dataTransfer.setData("sectionIndex",$(this).closest(".section-item").data("section-idx")),e.originalEvent.dataTransfer.setData("moduleIndex",$(this).data("module-idx")),$(this).addClass("dragging")})),$(".module-item").on("dragend",(function(){$(this).removeClass("dragging"),$(".drag-over").removeClass("drag-over")})),$(".module-item").on("dragover",(function(e){e.preventDefault(),e.stopPropagation(),e.originalEvent.dataTransfer.dropEffect="move",$(this).addClass("drag-over")})),$(".module-item").on("dragleave",(function(){$(this).removeClass("drag-over")})),$(".module-item").on("drop",(function(e){if(e.preventDefault(),e.stopPropagation(),"module"===e.originalEvent.dataTransfer.getData("type")){var expandedSections=self.captureCollapseState(),fromSectionIdx=parseInt(e.originalEvent.dataTransfer.getData("sectionIndex")),fromModuleIdx=parseInt(e.originalEvent.dataTransfer.getData("moduleIndex")),toSectionIdx=$(this).closest(".section-item").data("section-idx"),toModuleIdx=$(this).data("module-idx"),module=self.structure.sections[fromSectionIdx].modules.splice(fromModuleIdx,1)[0];self.structure.sections[toSectionIdx].modules.splice(toModuleIdx,0,module),self.markAsModified(),self.pendingCollapseState=expandedSections,self.renderStructure()}})),$(".modules-list").on("dragover",(function(e){e.preventDefault(),e.stopPropagation(),e.originalEvent.dataTransfer.dropEffect="move"})),$(".modules-list").on("drop",(function(e){if(e.preventDefault(),e.stopPropagation(),"module"===e.originalEvent.dataTransfer.getData("type")){var expandedSections=self.captureCollapseState(),fromSectionIdx=parseInt(e.originalEvent.dataTransfer.getData("sectionIndex")),fromModuleIdx=parseInt(e.originalEvent.dataTransfer.getData("moduleIndex")),toSectionIdx=$(this).closest(".section-item").data("section-idx"),module=self.structure.sections[fromSectionIdx].modules.splice(fromModuleIdx,1)[0];self.structure.sections[toSectionIdx].modules.push(module),self.markAsModified(),self.pendingCollapseState=expandedSections,self.renderStructure()}}))},setupEventHandlers:function(){var self=this;$(window).on("beforeunload",(function(){if(self.hasUnsavedChanges)return self.unsavedChangesMessage||"You have unsaved changes. Are you sure you want to leave?"})),Str.get_string("editor_unsaved_changes","block_dixeo_coursegen").done((function(str){self.unsavedChangesMessage=str}))},updateUndoRedoButtons:function(){var canUndo=this.historyIndex>0,canRedo=this.historyIndex<this.historyTotal-1;$("#btn-undo").prop("disabled",!canUndo),$("#btn-redo").prop("disabled",!canRedo)},undo:function(){if(!(this.historyIndex<=0))if(this.hasUnsavedChanges){var self=this;Str.get_strings([{key:"editor_reload_confirm",component:"block_dixeo_coursegen"},{key:"cancel",component:"core"},{key:"continue",component:"core"}]).done((function(strings){Notification.confirm(strings[0],"",strings[2],strings[1],(function(){self.hasUnsavedChanges=!1,self.autoSaveEnabled=!1,self.countdown=60,$("#countdown-timer").hide(),$("#autosave-label").hide(),self.showLoading(),self.loadStructure(self.historyIndex-1)}))}))}else this.showLoading(),this.loadStructure(this.historyIndex-1)},redo:function(){if(!(this.historyIndex>=this.historyTotal-1))if(this.hasUnsavedChanges){var self=this;Str.get_strings([{key:"editor_reload_confirm",component:"block_dixeo_coursegen"},{key:"cancel",component:"core"},{key:"continue",component:"core"}]).done((function(strings){Notification.confirm(strings[0],"",strings[2],strings[1],(function(){self.hasUnsavedChanges=!1,self.autoSaveEnabled=!1,self.countdown=60,$("#countdown-timer").hide(),$("#autosave-label").hide(),self.showLoading(),self.loadStructure(self.historyIndex+1)}))}))}else this.showLoading(),this.loadStructure(this.historyIndex+1)},showSavingIndicator:function(){$(".saving-indicator").remove(),Str.get_string("editor_saving","block_dixeo_coursegen").done((function(str){var $indicator=$('<div class="saving-indicator"><i class="fa fa-spinner fa-spin"></i> '+str+"</div>");$("body").append($indicator),setTimeout((function(){$indicator.remove()}),3e3)}))},showSavedIndicator:function(){$(".saving-indicator").remove(),Str.get_string("editor_saved","block_dixeo_coursegen").done((function(str){var $indicator=$('<div class="saving-indicator"><i class="fa fa-check"></i> '+str+"</div>");$("body").append($indicator),setTimeout((function(){$indicator.fadeOut((function(){$(this).remove()}))}),2e3)}))},showDivergentWarning:function(version){Str.get_strings([{key:"editor_divergent_save",component:"block_dixeo_coursegen"},{key:"editor_divergent_message",component:"block_dixeo_coursegen",param:version},{key:"editor_ok",component:"block_dixeo_coursegen"}]).done((function(strings){Notification.alert(strings[0],strings[1],strings[2])}))}}}));

//# sourceMappingURL=editor.min.js.map