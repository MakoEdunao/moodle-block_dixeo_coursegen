{"version":3,"file":"generator.min.js","sources":["../src/generator.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * AMD module for course generator block.\n *\n * @module     block_dixeo_coursegen/generator\n * @author     Josemaria Bolanos <admin@mako.digital>\n * @copyright  2025 Dixeo (contact@dixeo.com)\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine([\n    'core/ajax',\n    'jquery',\n    'core/templates',\n    'core/notification',\n    'core/str',\n    'core/config'\n], function(Ajax, $, Template, Notification, Str, Config) {\n    const generatorForm = document.getElementById('edai_course_generator_form');\n    const promptContainer = generatorForm.querySelector('.prompt-container');\n    const promptForm = generatorForm.querySelector('#prompt-form');\n    const generationContainer = generatorForm.querySelector('.generation-container');\n    const courseDescription = generatorForm.querySelector('#course_description');\n    const generateCourse = generatorForm.querySelector('#generate_course');\n    const generateStructure = generatorForm.querySelector('#generate_course_structure');\n    const tempCourseFiles = generatorForm.querySelector('#temp_course_files');\n    const courseFiles = generatorForm.querySelector('#course_files');\n    const filesContainer = generatorForm.querySelector('#file_names');\n    const maxfilesize = 20 * 1024 * 1024; // 20 MB.\n    const maxtotalsize = 50 * 1024 * 1024; // 50 MB.\n\n    return {\n        init: function() {\n            this.progress = 0;\n\n            this.adjustDescriptionHeight();\n            this.handleDragAndDrop();\n\n            // Trigger generation if course description is filled on page load.\n            if (courseDescription.value.trim() !== '') {\n                setTimeout(() => {\n                    generateStructure.click();\n                }, 1000);\n            }\n\n            // Add event listener to trigger generation on pressing Enter in the course description.\n            courseDescription.addEventListener('keydown', (event) => {\n                if (event.key === 'Enter' && !event.shiftKey) {\n                    event.preventDefault();\n                    generateStructure.click();\n                }\n            });\n\n            // Add event listener to generate course button.\n            generateCourse.addEventListener('click', (event) => this.generateCourse(event, false));\n            // Add event listener to generate course structure button.\n            generateStructure.addEventListener('click', (event) => this.generateCourse(event, true));\n        },\n        generateCourse: function(event, reviewStructure) {\n            event.preventDefault();\n\n            let courseDescriptionValue = courseDescription.value.trim();\n            courseDescription.value = '';\n\n            // Check if the course description is filled or files are uploaded.\n            if (courseDescriptionValue === '' && courseFiles.files.length === 0) {\n                this.notify('invalidinput', 'descriptionorfilesrequired');\n                return;\n            }\n\n            if (this.progress === 0) {\n                this.startProgress();\n            }\n\n            // for (let i = 0; i < courseFiles.files.length; i++) {\n            //     formdata.append('course_files[]', courseFiles.files[i]);\n            // }\n\n            Ajax.call([{\n                methodname: 'block_dixeo_coursegen_generate_course',\n                args: {\n                    job_id: generationContainer.dataset.job_id,\n                    description: courseDescriptionValue,\n                    skip: reviewStructure ? 0 : 1,\n                    sesskey: M.cfg.sesskey\n                },\n            }])[0]\n            .then(data => {\n                const courseid = data.courseid;\n                const coursename = data.coursename;\n\n                if (courseid == 0 && reviewStructure == true) {\n                    window.location.href = Config.wwwroot + '/blocks/dixeo_coursegen/review.php?id=' +\n                        generationContainer.dataset.job_id;\n                    return;\n                }\n\n                this.finishProgress(courseid, coursename);\n\n                return;\n            })\n            .catch(async error => {\n                this.resetProgress();\n                const errorTitle = await Str.get_string('error_title', 'block_dixeo_coursegen');\n                Notification.alert(errorTitle, error.message);\n            });\n        },\n        adjustDescriptionHeight: function() {\n            // Adjust course description height.\n            courseDescription.addEventListener('input', function() {\n            this.style.height = 'auto'; // Reset height\n            const maxHeight = parseFloat(getComputedStyle(this).lineHeight) * 9; // 9 lines max\n            this.style.overflowY = 'hidden';\n\n            if (this.scrollHeight > maxHeight) {\n                this.style.height = maxHeight + 'px';\n                this.style.overflowY = 'scroll';\n            } else {\n                this.style.height = this.scrollHeight + 'px';\n            }\n        });\n        },\n        clearAllFiles: function() {\n            let dataTransfer = new DataTransfer();\n            courseFiles.files = dataTransfer.files;\n            this.displayFileNames();\n        },\n        transferFiles: function(newFiles) {\n            // Validate files.\n            const allowedtypes = [\n                'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n                'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n                'application/pdf',\n                'text/plain'\n            ];\n\n            let totalSize = 0;\n            let existingFiles = Array.from(courseFiles.files);\n\n            // Include the size of files already added to courseFiles.\n            for (let file of existingFiles) {\n                totalSize += file.size;\n            }\n\n            for (let file of newFiles) {\n                // Check file type.\n                if (!allowedtypes.includes(file.type)) {\n                    this.notify('uploaderror', ['filetypeinvalid', file.name]);\n                    return;\n                }\n                // Check file size.\n                totalSize += file.size;\n                if (file.size > maxfilesize) {\n                    this.notify('uploaderror', ['filetoolarge', file.name]);\n                    return;\n                }\n                // Check total size.\n                if (totalSize > maxtotalsize) {\n                    this.notify('uploaderror', 'totaltoolarge');\n                    return;\n                }\n            }\n\n            // Combine existing files with new files.\n            for (let file of newFiles) {\n                // Check if file already exists.\n                if (!existingFiles.some(existingFile => existingFile.name === file.name && existingFile.size === file.size)) {\n                    existingFiles.push(file);\n                }\n            }\n\n            // Add all files to DataTransfer\n            let dataTransfer = new DataTransfer();\n            for (let file of existingFiles) {\n                dataTransfer.items.add(file);\n            }\n\n            courseFiles.files = dataTransfer.files;\n            this.displayFileNames();\n        },\n        handleDragAndDrop: function() {\n            // Drag over and leave over prompt form.\n            let dragEnterCounter = 0;\n            $('#prompt-form').bind({\n                dragenter: function(event) {\n                    event.preventDefault();\n                    event.stopPropagation();\n                    dragEnterCounter++;\n                    promptContainer.classList.add('drag-over');\n                },\n                dragleave: function(event) {\n                    event.preventDefault();\n                    event.stopPropagation();\n                    dragEnterCounter--;\n                    if (dragEnterCounter === 0) {\n                        promptContainer.classList.remove('drag-over');\n                    }\n                },\n            });\n\n            // Apply drop listeners to all child elements of prompt form.\n            this.dropOnChildElements(promptForm);\n            // Move files from temp to course files.\n            tempCourseFiles.addEventListener('change', () => {\n                let newFiles = Array.from(tempCourseFiles.files);\n                this.transferFiles(newFiles);\n            });\n        },\n        dropOnChildElements: function(node) {\n            node.childNodes.forEach(child => {\n                this.dropOnChildElements(child);\n\n                child.addEventListener(\"dragover\", (event) => {\n                    event.preventDefault();\n                    event.stopPropagation();\n                });\n\n                child.addEventListener(\"drop\", (event) => {\n                    event.preventDefault();\n                    event.stopPropagation();\n                    promptContainer.classList.remove('drag-over');\n\n                    if (event.dataTransfer.files.length > 0) {\n                        this.transferFiles(event.dataTransfer.files);\n                    }\n                });\n            });\n        },\n        startProgress: function() {\n            generateCourse.disabled = true;\n            generateStructure.disabled = true;\n            promptContainer.classList.replace('d-block', 'd-none');\n            generationContainer.classList.replace('d-none', 'd-block');\n\n            let interval = setInterval(() => {\n                if (this.progress >= 95) {\n                    clearInterval(interval);\n                }\n\n                // Increase by a random amount every second\n                let stage = parseInt(generationContainer.dataset.status);\n\n                if (this.progress < stage * 20) {\n                    this.setProgress(stage * 20);\n                } else {\n                    // Each increment should average about 20/45 â‰ˆ 0.44.\n                    // Use Math.random() to get a value between 0.3 and 0.6, rounded to 2 decimals.\n                    let increment = +(0.3 + Math.random() * 0.3).toFixed(2);\n\n                    if (this.progress < 40 || this.progress > 80) {\n                        increment /= 2; // Slow down before 40% and after 90%.\n                    }\n\n                    this.setProgress(this.progress + increment);\n                }\n            }, 1000);\n        },\n        finishProgress: async function(courseid, coursename) {\n            this.setProgress(100);\n            setTimeout(() => {\n                let context = {\n                    courseid: courseid,\n                    coursename: coursename,\n                    wwwroot: Config.wwwroot\n                };\n\n                Template.render('block_dixeo_coursegen/success_message', context)\n                .then((html) => {\n                    generationContainer.parentElement.insertAdjacentHTML('beforeend', html);\n                    generationContainer.classList.replace('d-block', 'd-none');\n                    return;\n                }).catch((error) => {\n                    Notification.exception(error);\n                });\n            }, 3000);\n        },\n        resetProgress: function() {\n            generateCourse.disabled = false;\n            generateStructure.disabled = false;\n            promptContainer.classList.replace('d-none', 'd-block');\n            generationContainer.classList.replace('d-block', 'd-none');\n\n            courseDescription.value = '';\n\n            let successContainer = generatorForm.querySelector('#success_message_container');\n            if (successContainer) {\n                successContainer.remove();\n            }\n\n            this.clearAllFiles();\n\n            this.setProgress(0);\n        },\n        setProgress: function(progress) {\n            this.progress = progress;\n\n            let progressBar = generatorForm.querySelector('.s-progress--bar');\n            if (progressBar) {\n                progressBar.style.width = `${progress}%`;\n                if (progress >= 100) {\n                    progressBar.classList.add('done');\n                } else {\n                    progressBar.classList.remove('done');\n                }\n            }\n        },\n        displayFileNames: function() {\n            let contextFiles = [];\n            let totalSize = 0;\n            for (let i = 0; i < courseFiles.files.length; i++) {\n                const file = courseFiles.files[i];\n                totalSize += file.size;\n                contextFiles.push({\n                    name: file.name,\n                    size: this.formatFilesize(file.size),\n                });\n            }\n            let hasFiles = contextFiles.length > 0;\n            let context = {\n                hasFiles: hasFiles,\n                totalSize: this.formatFilesize(totalSize),\n                maxTotalSize: this.formatFilesize(maxtotalsize),\n                files: contextFiles\n            };\n\n            if (filesContainer) {\n                Template.render('block_dixeo_coursegen/filenames', context).then((html) => {\n                    filesContainer.innerHTML = html;\n\n                    let deleteIcons = filesContainer.querySelectorAll('.delete-icon');\n                    deleteIcons.forEach((deleteIcon, index) => {\n                        let that = this;\n                        let toDelete = courseFiles.files[index].name;\n\n                        deleteIcon.addEventListener('click', function() {\n                            // Remove file from display.\n                            let toolTipId = deleteIcon.getAttribute('aria-describedby');\n                            document.getElementById(toolTipId).remove();\n\n                            // Remove file from course files.\n                            let dataTransfer = new DataTransfer();\n                            for (let i = 0; i < courseFiles.files.length; i++) {\n                                if (courseFiles.files[i].name !== toDelete) {\n                                    dataTransfer.items.add(courseFiles.files[i]);\n                                }\n                            }\n\n                            courseFiles.files = dataTransfer.files;\n                            that.displayFileNames();\n                        });\n                    });\n\n                    return;\n                }).catch((error) => {\n                    Notification.exception(error);\n                });\n            }\n        },\n        formatFilesize: (size) => {\n            const units = ['bytes', 'KB', 'MB', 'GB', 'TB'];\n            let unitIndex = 0;\n            while (size >= 1024 && unitIndex < units.length - 1) {\n                size /= 1024;\n                unitIndex++;\n            }\n            return `${size.toFixed(1)} ${units[unitIndex]}`;\n        },\n        notify: async function() {\n            let strings = [];\n            let component = 'block_dixeo_coursegen';\n\n            for (let i = 0; i < arguments.length; i++) {\n                if (Array.isArray(arguments[i])) {\n                    strings.push({\n                        key: arguments[i][0],\n                        component: component,\n                        param: arguments[i][1]\n                    });\n                } else {\n                    strings.push({\n                        key: arguments[i],\n                        component: component\n                    });\n                }\n            }\n\n            Str.get_strings(strings)\n            .done((s) => {\n                if (s.length > 1) {\n                    Notification.alert(s[0], s[1]);\n                } else {\n                    Notification.alert('', s[0]);\n                }\n            })\n            .fail(Notification.exception);\n        }\n    };\n});\n"],"names":["define","Ajax","$","Template","Notification","Str","Config","generatorForm","document","getElementById","promptContainer","querySelector","promptForm","generationContainer","courseDescription","generateCourse","generateStructure","tempCourseFiles","courseFiles","filesContainer","init","progress","adjustDescriptionHeight","handleDragAndDrop","value","trim","setTimeout","click","addEventListener","event","key","shiftKey","preventDefault","this","reviewStructure","courseDescriptionValue","files","length","startProgress","call","methodname","args","job_id","dataset","description","skip","sesskey","M","cfg","then","data","courseid","coursename","finishProgress","window","location","href","wwwroot","catch","async","resetProgress","errorTitle","get_string","alert","error","message","notify","style","height","maxHeight","parseFloat","getComputedStyle","lineHeight","overflowY","scrollHeight","clearAllFiles","dataTransfer","DataTransfer","displayFileNames","transferFiles","newFiles","allowedtypes","totalSize","existingFiles","Array","from","file","size","includes","type","name","some","existingFile","push","items","add","dragEnterCounter","bind","dragenter","stopPropagation","classList","dragleave","remove","dropOnChildElements","node","childNodes","forEach","child","disabled","replace","interval","setInterval","clearInterval","stage","parseInt","status","setProgress","increment","Math","random","toFixed","context","render","html","parentElement","insertAdjacentHTML","exception","successContainer","progressBar","width","contextFiles","i","formatFilesize","hasFiles","maxTotalSize","innerHTML","querySelectorAll","deleteIcon","index","that","toDelete","toolTipId","getAttribute","units","unitIndex","strings","component","arguments","isArray","param","get_strings","done","s","fail"],"mappings":"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"}